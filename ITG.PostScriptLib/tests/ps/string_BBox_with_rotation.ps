%!PS-Adobe-3.0
%%Title: Test: string_BBox должен возвращать близкие результаты при повороте холста на любые углы
%%Creator: Sergey S. Betke <sergey.s.betke@yandex.ru>
%%Copyright: 2018 Sergey S. Betke <sergey.s.betke@yandex.ru>
%%+ See LICENSE at https://github.com/Metrolog/marks
%%LanguageLevel: 3
%%DocumentData: Clean7Bit
%%DocumentNeededResources: ProcSet (assert) 2.2 0
%%+: ProcSet (boxes) 2.2 0
%%EndComments
%!

%%BeginProlog

%%IncludeResource: ProcSet assert 2.2 0
%%IncludeResource: ProcSet boxes 2.2 0

%%EndProlog

/NimbusSans-Regular findfont
12 scalefont setfont

/teststring (Test string) def
        teststring
      /boxes /ProcSet findresource /string_BBox get exec
    /boxes /ProcSet findresource /size_of_BBox get exec % sx1 sy1
    (size of test string:) print  1 index 20 string cvs print  ( x ) print  dup =
    45 rotate
        teststring
      /boxes /ProcSet findresource /string_BBox get exec
    /boxes /ProcSet findresource /size_of_BBox get exec % sx1 sy1
    (size of test string after rotating:) print  1 index 20 string cvs print  ( x ) print  dup =
  /assert /ProcSet findresource /sizes_almost_equal get exec % sx1 sy1
  (string_BBox must return the same string size and for rotated canvas)
/assert /ProcSet findresource /assert get exec

%%EOF
